---
title: "Carbon Emissions Things!"
author: "Majd Rouhana, Elizabeth Tran, Charlie Estes"
date: "November 15th, 2020"
output:
  rmdformats::material:
    thumbnails: false
    highlight: NULL
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.align="center")
library(tidyverse)
library(ggplot2)
library(viridis)
library(GGally)
library(ggformula)


us_data_for_mapping <- read_csv('us_data_for_mapping.csv')

blogData <- read_csv("blogData.csv")

carbon_data <- blogData %>%  rename(perCapitaC02 = `Per Capita C02 Emission`, medianIncome = `Median Income`, C02Emission = `C02 Emission`)

```



# Carbon Emissions and Respiratory Illness:

Climate change is an intensely complex phenomenon. It proceeds at an unsteady pace, scientists still struggle to determine the long-term effects, and while research is prevalent, exactly how to solve this issue remains to be decided. Even so, the sum of evidence paints a clear (and terrifying) picture: our Earth is warming and the consequences are becoming increasingly destructive. Scientists have high confidence that the warming temperatures and unstable weather patterns will continue, especially as the production of greenhouse gases remains unhindered. For the United States, this can look like sustained wildfires in the West, rising sea levels, stronger hurricanes, and other environmental repercussions. While those can all be seen as the ramifications on our Earth, it is also important to look at how humans specifically are impacted by greenhouse emissions. Further, the diverse and varied population and demographics of the United States dictates what is already known: the effects will not be the same for everyone. 





According to the American Lung Associationâ€™s State of the Air, a yearly report based on official air quality data, almost 5 in 10 people live in counties where the air is unhealthy to breathe. Further, the impacts of the air quality varies for different groups of people. Those with preexisting health conditions, in poverty, who belong to a community of color, and more have been shown to be more likely to be at risk. Exactly what this might look like is difficult to determine, but there has been a great deal of research that measures how certain factors can dictate who is affected.  






Our project looks at the respiratory illness mortality rate per state against a number of different factors, including carbon emissions, educational attainment rates, and median household income. With this information, we hoped to see how mortality rates varied between states and whether we could see a correlation between that and carbon emission rates. By examining how educational attainment and income might influence these rates, we also want to see how class and other societal indicators might be relevant. Of course, our findings do not indicate any direct causation between these variables, but rather show how some level of correlation might be at play.

# Respiratory Disease Mortality Rate by State  {.tabset .tabset-fade .tabset-pills}

In looking at the mortality rate of respiratory disease against the carbon dioxide emission rate per millions of metric tons, there does not seem to be a very linear correlation. However, when plotted against our other variables, such as median income or percent of adults 25 or older with a Bachelor's Degree, the linearity increases substantially. After a visual correlation test, we can see that the coefficient of correlation value is close to -1.0 

```{r}
# Create scatter plot of CO2 Emission vs. Mortality Rate. 
rateEmissionsData <- blogData %>%
  rename("CO2_Emission" = "C02 Emission") %>%
  rename("MedianIncome" = "Median Income")
  
rateEmissions <- ggplot(rateEmissionsData, aes(x = CO2_Emission, y = Rate)) +
  geom_point() + 
  xlab("CO2 Emission") +
  ylab("Mortality Rate") +
  geom_smooth() 

rateEmissions

```

```{r}
matrixData <- blogData %>%
  rename("MedianIncome" = "Median Income") %>%
  rename("CO2_Emission" = "C02 Emission") %>%
  select(Rate, CO2_Emission, MedianIncome, PercentBachelorsOrHigher)

plot(matrixData , pch=20 , cex=1.5 , col="#69b3a2")

ggcorr(matrixData)
```
After running the plots of mortality rate against both median income and educational attainment, we see a much more linear correlation. As income and education level increases, the rate of mortality decreases. This has interesting implications for our project; it seems that income and education are much more influential factors than location. 


```{r}
rateEmissions1 <- ggplot(rateEmissionsData, aes(x = MedianIncome, y = Rate)) +
  geom_point() + 
  xlab("Median Income") +
  ylab("Mortality Rate") +
  geom_smooth() 

rateEmissions2 <- ggplot(rateEmissionsData, aes(x = PercentBachelorsOrHigher, y = Rate)) +
  geom_point() + 
  xlab("% of Adults 25 and Older with BA") +
  ylab("Mortality Rate") +
  geom_smooth() 

rateEmissions1
rateEmissions2
```



# Education and Public Health: A Carbon Emissions Point of View

Climate-induced disruptions are increasing in frequency and intensity, in part due to human activity. It has been shown that public health issues can be linked to such disruptions; The CDC has found that "the health effects of [climate-induced] disruptions include increased respiratory and cardiovascular disease, injuries and premature deaths related to extreme weather events, changes in the prevalence and geographical distribution of food- and water-borne illnesses and other infectious diseases, and threats to mental health."[3] Thus, if we care about public health, it seems to make sense to care about reducing carbon emissions.

Solutions aimed at carbon emission reduction tend to focus on mitigation and adaptation measures, and successful implementation of either strategy requires an informed and educated citizenry. Several studies have demonstrated the potential efficacy of education programs developed specifically for climate change mitigation (see [1], [2]). However, since targeted climate change education is less common at present than other forms of higher education, we wanted to explore the potential connection between general educational attainment and carbon emissions. 

At the state level, how does educational attainment affect carbon emissions?


[1]:https://doi.org/10.1371/journal.pone.0206266
[2]:http://dx.doi.org/10.1038/s41893-020-0512-y
[3]:https://www.cdc.gov/climateandhealth/effects/default.htm

```{r, echo = FALSE, warning=FALSE, message=FALSE}

##interactive html scatterplot using plotly package

 scatter1 <- ggplot(carbon_data, aes(x = PercentBachelorsOrHigher, y = perCapitaC02,
  text = paste("State: ", State,"<br>% Bachelors:", PercentBachelorsOrHigher, "<br>C02 Per Capita:", perCapitaC02))) + 
  geom_point(color = 'dark blue') + 
  labs(title = "Educational Attainment vs. Per Capita Carbon Emissions", x = "% Bachelor's Degree Or Higher", y = "Per Capita C02 Emissions (tons/yr)") 
  

library(plotly)

ggplotly(scatter1, tooltip = "text")

```

As the plot shows, there seems to be a slight negative relationship between attainment of higher educational degrees and per capita carbon emissions. 

What about a proximal measurement for education - income - and it's relationship with per capita C02 emissions? 


```{r, echo = FALSE, warning=FALSE, message=FALSE}

  #medianIncome vs. perCapC02
```


This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For example, you can include **Bold** and _Italic_ and `Code` text.  For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

You should test out updating your GitHub Pages website:

- clone your group's blog project repo in RStudio
- update "Your Project Title Here" to a new title in the YAML header
- knit `index.Rmd` 
- commit and push BOTH the `index.Rmd` and the `index.html` files
- go to https://stat231-f20.github.io/Blog-Healthy-Heroes/ to see the published test document (this is publicly available!)

# Respiratory Disease Death Rate vs Political Party Majority per State

From the box and whisker plot below, we see that the death rate for respiratory diseases is, on average, much lower among democratic-majority states than republican-majority states. The first quartile for republican-majority states, about 43%, is higher than even the third quartile of the democratic-majority states, which is about 42%.

States that have a democratic majority tend to be states with large cities; this implies that democratic-majority states may typically contain more pollution than republican-majority states, which tend to be more rural. Due to this connection, we may want to consider other factors for why republican-majority states seem to have a higher death rate.

One consideration is that the Republican Party places less of an emphasis on the importance of climate control and air pollution than the Democratic Party. Due of this, republican-majority states may in turn place less of an emphasis on controlling pollution. As a result, there may be more cases of respiratory disease, and thus, a higher death rate.

```{r}
color <- c("dodgerblue", "firebrick1")

gf_boxplot(Rate ~ party, data = blogData, fill = color) +
  labs(xlab = "Political Party Majority"
       , ylab = "Respiratory Disease Death Rate"
       , title = "Respiratory Disease Death Rate vs Political Party Majority per State")
```

## Including code and plots

You can embed code as normal, for example:

```{r cars, echo=FALSE}
mosaic::favstats(~speed, data = cars)
```

Let's clean up the format of that output:

```{r pretty, echo=FALSE, warning=FALSE, message=FALSE}
library(kableExtra)
summary(cars) %>%
  kable(col.names = c("Speed", "Distance")
        , row.names = F) %>%
  kable_styling(bootstrap_options = "striped"
                , full_width = F) %>%
  row_spec(0, bold = T, underline = T) %>%
  column_spec(1:2, width = "1.5in") 
```

In a study from the 1920s, fifty cars were used to see how the speed of the car and the distance taken to stop were related.  Speeds ranged between `r min(cars$speed)` and `r max(cars$speed)` mph.  Distances taken to stop ranged between `r min(cars$dist)` and `r max(cars$dist)` feet, with the middle 50% falling between `r as.numeric(quantile(cars$dist)[2])` and `r as.numeric(quantile(cars$dist)[4])` feet.  

You can also embed plots as normal, for example:

```{r figure1, echo=FALSE}
ggplot(data = cars, aes(x = speed, y = dist)) + 
  geom_point() + 
  labs(x = "Speed of car (mph)"
       , y = "Distance taken to stop (ft)"
       , title = "cars data (1920s)")
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.



## Including links and images

You can include [Links](https://www.datadreaming.org/post/r-markdown-theme-gallery/) and images ![team logo](https://raw.githubusercontent.com/stat231-f20/Blog-Healthy-Heroes/main/images/healthy_heroes.jpg)


# You can even create tabs if you want! {.tabset .tabset-fade .tabset-pills}

## Bulleted list

You can make a bulleted list like this:

- item 1
- item 2
- item 3


## Numbered list

You can make a numbered list like this

1. First thing I want to say
2. Second thing I want to say
3. Third thing I want to say

